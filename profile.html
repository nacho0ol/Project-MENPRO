<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - Olivia Meat</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
    <link rel="stylesheet" href="style.css" />
    <style>
        /* CSS TAMBAHAN UNTUK PROFILE & HISTORY */
        .sidebar-menu a { cursor: pointer; }
        .sidebar-menu a.active { background-color: #ffeaea; color: var(--primary-red); }
        
        /* Tab Content Control */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Style Kartu History */
        .history-card {
            border: 1px solid #e1e1e1;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            background: #fff;
            transition: 0.3s;
        }
        .history-card:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
            align-items: center;
        }
        .order-id { font-weight: 700; color: var(--secondary-navy); }
        .order-date { font-size: 0.85rem; color: #777; }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-success { background: #d4edda; color: #155724; }

        .history-items { display: flex; flex-direction: column; gap: 10px; }
        .h-item { display: flex; justify-content: space-between; font-size: 0.9rem; color: #555; }
        
        .history-footer {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .total-label { font-size: 0.9rem; }
        .total-price { font-weight: 700; color: var(--primary-red); font-size: 1.1rem; }
    </style>
</head>
<body>
    <nav class="navbar">
      <div class="container nav-content">
        <a href="index.html" class="logo"><img src="logo.png" alt="Logo"><span>Olivia Meat</span></a>
        <div class="nav-links">
          <a href="index.html#katalog">Produk</a>
          <a href="index.html#tentang">Tentang Kami</a>
          <a href="#footer-area">Kontak Kami</a>
        </div>
        <div class="nav-icons">
          <a href="cart.html"><i class="fas fa-shopping-cart"></i></a>
          <a href="profile.html"><i class="fas fa-user"></i></a>
          <a href="login.html" class="logout-btn" onclick="return confirm('Yakin ingin keluar?')"><i class="fas fa-sign-out-alt"></i> Keluar</a>
        </div>
      </div>
    </nav>

    <div class="container">
        <div class="dashboard-wrapper">
            
            <div class="sidebar">
                <div class="user-card">
                    <div class="user-avatar"><i class="fas fa-user-circle"></i></div>
                    <h4>Halo, User!</h4>
                    <p style="font-size: 12px; color: #888;">Member Setia</p>
                </div>
                <ul class="sidebar-menu">
                    <li><a onclick="switchTab('edit')" id="menu-edit" class="active"><i class="fas fa-user-edit"></i> Edit Profil</a></li>
                    <li><a onclick="switchTab('history')" id="menu-history"><i class="fas fa-history"></i> Riwayat Pesanan</a></li>
                    <li><a href="#" style="color:#aaa;"><i class="fas fa-map-marked-alt"></i> Alamat Saya</a></li>
                    <li><a href="login.html" style="color: #d9534f;"><i class="fas fa-sign-out-alt"></i> Keluar</a></li>
                </ul>
            </div>

            <div class="dashboard-content">
                
                <div id="tab-edit" class="tab-content active">
                    <div class="dashboard-header">
                        <h2>Edit Profil</h2>
                        <p style="color: #666;">Perbarui informasi akun Anda di sini.</p>
                    </div>
                    <form>
                      <div class="form-grid">
                        <div class="form-group"><label>Nama Depan</label><input type="text" value="Lorem" /></div>
                        <div class="form-group"><label>Nama Belakang</label><input type="text" value="Ipsum" /></div>
                      </div>
                      <div class="form-group"><label><i class="fas fa-map-marker-alt"></i> Alamat Pengiriman</label><input type="text" value="Jl. Kaliurang Km 5, Yogyakarta" /></div>
                      <div class="form-grid">
                          <div class="form-group"><label><i class="fab fa-whatsapp"></i> No. WhatsApp</label><input type="text" value="08123456789" /></div>
                          <div class="form-group"><label>Email</label><input type="email" value="lorem@email.com" /></div>
                      </div>
                      <button type="button" class="btn-save" onclick="alert('Profil berhasil disimpan!')"><i class="fas fa-save"></i> Simpan Perubahan</button>
                    </form>
                </div>

                <div id="tab-history" class="tab-content">
                    <div class="dashboard-header">
                        <h2>Riwayat Pesanan</h2>
                        <p style="color: #666;">Daftar transaksi yang pernah Anda lakukan.</p>
                    </div>
                    
                    <div id="history-container">
                        </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // 1. Fungsi Ganti Tab
        function switchTab(tabName) {
            // Sembunyikan semua tab
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.sidebar-menu a').forEach(el => el.classList.remove('active'));

            // Munculkan yang dipilih
            document.getElementById('tab-' + tabName).classList.add('active');
            document.getElementById('menu-' + tabName).classList.add('active');
        }

        // 2. Fungsi Load History
        const historyContainer = document.getElementById('history-container');
        const orders = JSON.parse(localStorage.getItem('orderHistory')) || [];

        if (orders.length === 0) {
            historyContainer.innerHTML = `
                <div style="text-align:center; padding: 40px; color:#888;">
                    <i class="fas fa-shopping-bag" style="font-size: 3rem; margin-bottom:15px; opacity:0.3;"></i>
                    <p>Belum ada riwayat pesanan.</p>
                    <a href="index.html" style="color:var(--primary-red); font-weight:600;">Belanja Sekarang</a>
                </div>
            `;
        } else {
            orders.forEach(order => {
                let itemsHtml = '';
                order.items.forEach(item => {
                    itemsHtml += `<div class="h-item"><span>${item.qty}x ${item.name}</span><span>Rp ${(item.price * item.qty).toLocaleString('id-ID')}</span></div>`;
                });

                historyContainer.innerHTML += `
                    <div class="history-card">
                        <div class="history-header">
                            <div>
                                <div class="order-id">ID: ${order.id}</div>
                                <div class="order-date"><i class="far fa-calendar-alt"></i> ${order.date}</div>
                            </div>
                            <span class="status-badge status-pending">${order.status}</span>
                        </div>
                        <div class="history-items">
                            ${itemsHtml}
                        </div>
                        <div class="history-footer">
                            <span class="total-label">Total Tagihan</span>
                            <span class="total-price">Rp ${order.total.toLocaleString('id-ID')}</span>
                        </div>
                    </div>
                `;
            });
        }
    </script>
</body>
</html>